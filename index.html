<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Geoar demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-ar@2.0.0/dist/aframe-ar.js"></script>
    <style>
        /* Add some basic styling for the loader */
        .arjs-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>

<body style="margin: 0; overflow: hidden;">
    <div class="arjs-loader" id="loader">
        <div>Loading, please wait...</div>
    </div>

    <a-scene vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true; precision: medium;" embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">

        <a-assets>
            <a-asset-item id="apple-obj" src="./image/bugatti.obj"></a-asset-item>
            <a-asset-item id="apple-mtl" src="./image/bugatti.mtl"></a-asset-item>
            <a-asset-item id="magnemite" src="./image/magnemite/scene.gltf"></a-asset-item>
        </a-assets>

        <!-- <a-sky color="#001337">
        </a-sky> -->

        <a-box position="0 0 -3" rotation="0 45 0" color="#4CC3D9" width="0.3" height="0.3" depth="1"></a-box>

        <!-- <a-entity gltf-model="./image/magnemite/scene.gltf" rotation="0 180 0" scale="0.15 0.15 0.15" animation-mixer>
        </a-entity> -->

        <!-- <a-marker type="nft">
            <a-entity scale="5 5 5" position="150 300 -100"></a-entity>
        </a-marker> -->

        <a-plane position="0 0 -5" color="lightgreen" rotation="-90 0 0" scale="4 4 4"></a-plane>
        <a-sphere color="#E75A87" radius="0.4" position="0.2 0.4 -3.5" opacity="0.8" id="sphere"></a-sphere>

        <!-- <a-text value="No markers around" look-at="[gps-camera]" scale="5 5 5"></a-text> -->

        <!-- <a-entity camera></a-entity> -->
        <a-camera gps-camera rotation-reader></a-camera>

        <!-- <a-marker preset='custom' url='./image/pattern-desk.png'></a-marker> -->
    </a-scene>

    <script>
        window.onload = () => {
            navigator.geolocation.getCurrentPosition((position) => {
                document.querySelector('a-text').setAttribute('gps-entity-place', `latitude: ${position.coords.latitude}; longitude: ${position.coords.longitude};`);
            });
        };
        document.querySelector('a-scene').addEventListener('loaded', function () {
            document.getElementById('loader').style.display = 'none';
        });
        function autoCall() {
            let scene = document.querySelector('a-box');
            scene.object3D.rotation.x += 0.1;
        }
        setInterval(autoCall, 100);
        document.querySelector('a-sphere').addEventListener('click', () => {
            let sphere = document.querySelector('a-sphere');
            sphere.setAttribute('color', 'red');
        });
    </script>
</body>

</html>
